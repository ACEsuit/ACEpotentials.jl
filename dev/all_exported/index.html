<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · ACEpotentials.jl</title><meta name="title" content="Reference · ACEpotentials.jl"/><meta property="og:title" content="Reference · ACEpotentials.jl"/><meta property="twitter:title" content="Reference · ACEpotentials.jl"/><meta name="description" content="Documentation for ACEpotentials.jl."/><meta property="og:description" content="Documentation for ACEpotentials.jl."/><meta property="twitter:description" content="Documentation for ACEpotentials.jl."/><meta property="og:url" content="https://ACEsuit.github.io/ACEpotentials.jl/all_exported/"/><meta property="twitter:url" content="https://ACEsuit.github.io/ACEpotentials.jl/all_exported/"/><link rel="canonical" href="https://ACEsuit.github.io/ACEpotentials.jl/all_exported/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ACEpotentials.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../gettingstarted/installation/">Installation</a></li><li><a class="tocitem" href="../gettingstarted/saving-and-loading/">Saving and Loading Potentials</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorials/">Tutorials Overview</a></li><li><a class="tocitem" href="../literate_tutorials/basic_julia_workflow/">Basic Workflow</a></li><li><a class="tocitem" href="../literate_tutorials/smoothness_priors/">Smoothness Priors</a></li><li><a class="tocitem" href="../literate_tutorials/dataset_analysis/">Basic Dataset Analysis</a></li><li><a class="tocitem" href="../tutorials/scripting/">Basic Shell Workflow</a></li><li><a class="tocitem" href="../literate_tutorials/descriptor/">ACE Descriptors</a></li><li><a class="tocitem" href="../literate_tutorials/asp/">Sparse Solvers</a></li><li><a class="tocitem" href="../literate_tutorials/etace_tutorial/">ETACE Models Tutorial</a></li></ul></li><li><span class="tocitem">Additional Topics</span><ul><li><a class="tocitem" href="../gettingstarted/parallel-fitting/">Parallel Fitting</a></li><li><a class="tocitem" href="../gettingstarted/aceintro/">Introduction to ACE Models</a></li><li><a class="tocitem" href="../gettingstarted/pkg/">Using the Julia Package Manager</a></li></ul></li><li class="is-active"><a class="tocitem" href>Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/main/docs/src/all_exported.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="ACEpotentials.jl-API"><a class="docs-heading-anchor" href="#ACEpotentials.jl-API"><code>ACEpotentials.jl</code> API</a><a id="ACEpotentials.jl-API-1"></a><a class="docs-heading-anchor-permalink" href="#ACEpotentials.jl-API" title="Permalink"></a></h1><h3 id="Exported"><a class="docs-heading-anchor" href="#Exported">Exported</a><a id="Exported-1"></a><a class="docs-heading-anchor-permalink" href="#Exported" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="ACEpotentials.acefit!-Tuple{AbstractArray{&lt;:AtomsBase.AbstractSystem}, Any}"><a class="docstring-binding" href="#ACEpotentials.acefit!-Tuple{AbstractArray{&lt;:AtomsBase.AbstractSystem}, Any}"><code>ACEpotentials.acefit!</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>acefit!(rawdata, model; kwargs...)</p><p>provides a convenient interface to fitting the parameters of an ACE model.  The data should be provided as a collection of <code>AbstractSystem</code> structures. </p><p>Keyword arguments:</p><ul><li><code>energy_key</code>, <code>force_key</code>, <code>virial_key</code> specify </li></ul><p>the label of the data to which the parameters will be fitted. </p><ul><li><code>weights</code> specifies the regression weights, default is 30 for energy, 1 for forces and virials</li><li><code>solver</code> specifies the lsq solver, default is <code>BLR</code> (BayesianLinearRegression)</li><li><code>smoothness</code> specifies the smoothness prior, i.e. how strongly damped   parameters corresponding to high polynomial degrees are; is 2.</li><li><code>prior</code> specifies a covariance of the prior, if <code>nothing</code> then a smoothness prior   is used, using the <code>smoothness</code> parameter </li><li><code>repulsion_restraint</code> specifies whether to add artificial data to the training   set that effectively introduces a restraints encouraging repulsion   in the limit rij -&gt; 0.</li><li><code>restraint_weight</code> specifies the weight of the repulsion restraint.</li><li><code>export_lammps</code> : path to a file to which the fitted potential will be exported   in a LAMMPS compatible format (yace)</li><li><code>export_json</code> : path to a file to which the fitted potential will be exported   in a JSON format, which can be read from Julia or Python</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/fit_model.jl#L51-L74">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.site_descriptors-Tuple{AtomsBase.AbstractSystem, ACEpotentials.Models.ACEPotential}"><a class="docstring-binding" href="#ACEpotentials.site_descriptors-Tuple{AtomsBase.AbstractSystem, ACEpotentials.Models.ACEPotential}"><code>ACEpotentials.site_descriptors</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">site_descriptors(system::AbstractSystem, model::ACEPotential;
                 domain, nlist)</code></pre><p>Compute site descriptors for all atoms in <code>system</code>, returning them as a vector of vectors. If the optional kw argument <code>domain</code> is passed as a list of  integers (atom indices), then only the site descriptors for those atoms are  computed and returned. The neighbourlist <code>nlist</code> can be supplied optionally as a kw arg, otherwise it is recomputed. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/descriptor.jl#L24-L33">source</a></section></details></article><h3 id="Not-exported"><a class="docs-heading-anchor" href="#Not-exported">Not exported</a><a id="Not-exported-1"></a><a class="docs-heading-anchor-permalink" href="#Not-exported" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="ACEpotentials.at_dimer-Tuple{Any, Any, Any}"><a class="docstring-binding" href="#ACEpotentials.at_dimer-Tuple{Any, Any, Any}"><code>ACEpotentials.at_dimer</code></a> — <span class="docstring-category">Method</span></summary><section><div><p><code>function at_dimer(r, z1, z0)</code> : generates a dimer with separation <code>r</code> and  atomic numbers <code>z1</code> and <code>z0</code>.  (can also use symbols or strings)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/analysis/potential_analysis.jl#L15-L18">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.at_trimer-NTuple{6, Any}"><a class="docstring-binding" href="#ACEpotentials.at_trimer-NTuple{6, Any}"><code>ACEpotentials.at_trimer</code></a> — <span class="docstring-category">Method</span></summary><section><div><p><code>function at_trimer(r1, r2, θ, z0, z1, z2)</code> : generates a trimer with separations <code>r1</code> and <code>r2</code>, angle <code>θ</code> and atomic numbers <code>z0</code>, <code>z1</code> and <code>z2</code>  (can also use symbols or strings),  where <code>z0</code> is the species of the central  atom, <code>z1</code> at distance <code>r1</code> and <code>z2</code> at distance <code>r2</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/analysis/potential_analysis.jl#L30-L35">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.atom_energy-Tuple{Any, Any}"><a class="docstring-binding" href="#ACEpotentials.atom_energy-Tuple{Any, Any}"><code>ACEpotentials.atom_energy</code></a> — <span class="docstring-category">Method</span></summary><section><div><p><code>function atom_energy(IP, z0)</code> : energy of an isolated atom</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/analysis/potential_analysis.jl#L54-L56">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.copy_runfit"><a class="docstring-binding" href="#ACEpotentials.copy_runfit"><code>ACEpotentials.copy_runfit</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">  copy_runfit(dest = pwd())</code></pre><p>Copies the <code>runfit.jl</code> script and an example model parameter file to <code>dest</code>. If called from the destination directory, use </p><pre><code class="language-julia hljs">ACEpotentials.copy_runfit()</code></pre><p>This is intended to setup a local project directory with the necessary  scripts to run a fitting job.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/json_interface.jl#L89-L99">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.copy_tutorial"><a class="docstring-binding" href="#ACEpotentials.copy_tutorial"><code>ACEpotentials.copy_tutorial</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">  copy_tutorial(dest = pwd())</code></pre><p>Converts the <code>ACEpotential-Tutorial.jl</code> and <code>ACE+AtomsBase.jl</code> literate  notebooks to jupyter notebooks and copies them to the folder <code>dest</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/json_interface.jl#L192-L197">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.decohesion_curve-Tuple{Any, Any}"><a class="docstring-binding" href="#ACEpotentials.decohesion_curve-Tuple{Any, Any}"><code>ACEpotentials.decohesion_curve</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Generate a decohesion curve for testing the smoothness of a potential.  Arguments:</p><ul><li><code>at0</code> : unit cell </li><li><code>pot</code> : potential implementing <code>energy</code></li></ul><p>Keyword Arguments: </p><ul><li><code>dim = 1</code> : dimension into which to expand</li><li><code>mult = 10</code> : multiplicative factor for expanding the cell in dim direction</li><li><code>aa = :auto</code> : array of stretch values of the lattice parameter to use</li><li><code>npoints = 100</code> : number of points to use in the stretch array (for auto aa)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/analysis/potential_analysis.jl#L160-L170">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.dimer_energy-NTuple{4, Any}"><a class="docstring-binding" href="#ACEpotentials.dimer_energy-NTuple{4, Any}"><code>ACEpotentials.dimer_energy</code></a> — <span class="docstring-category">Method</span></summary><section><div><p><code>function dimer_energy(pot, r, z1, z0)</code> : energy of a dimer  with separation <code>r</code> and atomic numbers <code>z1</code> and <code>z0</code> using the potential <code>pot</code>;  subtracting the 1-body contributions. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/analysis/potential_analysis.jl#L67-L71">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.dimers-Tuple{Any, Any}"><a class="docstring-binding" href="#ACEpotentials.dimers-Tuple{Any, Any}"><code>ACEpotentials.dimers</code></a> — <span class="docstring-category">Method</span></summary><section><div><p><code>dimers(potential, elements; kwargs...)</code> :  Generate a dictionary of dimer curves for a given potential. </p><ul><li><code>potential</code> : potential to use to evaluate energy</li><li><code>elements</code> : list of chemical species, symbols for which the dimers are to be computed</li></ul><p>The function returns a dictionary <code>Ddim</code> such that <code>D[(s1, s2)]</code> contains pairs or arrays <code>(rr, E)</code> which can be plotted <code>plot(rr, E)</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/analysis/potential_analysis.jl#L101-L109">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.get_adf-Tuple{AbstractVector{&lt;:AtomsBase.AbstractSystem}, Any}"><a class="docstring-binding" href="#ACEpotentials.get_adf-Tuple{AbstractVector{&lt;:AtomsBase.AbstractSystem}, Any}"><code>ACEpotentials.get_adf</code></a> — <span class="docstring-category">Method</span></summary><section><div><p><code>function get_adf(data::AbstractVector{&lt;: Atoms}, r_cut; kwargs...)</code> :</p><p>Angular distribution, i.e. list of angles in [0, π] between all pairs of bonds  of length at most <code>r_cut</code>. Keyword arguments:</p><ul><li><code>skip = 3</code> : only consider every <code>skip</code>th atom in the dataset.</li><li><code>maxsamples = 100_000</code> : maximum number of samples to return.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/analysis/dataset_analysis.jl#L87-L94">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.get_rdf-Tuple{AbstractVector{&lt;:AtomsBase.AbstractSystem}, Any}"><a class="docstring-binding" href="#ACEpotentials.get_rdf-Tuple{AbstractVector{&lt;:AtomsBase.AbstractSystem}, Any}"><code>ACEpotentials.get_rdf</code></a> — <span class="docstring-category">Method</span></summary><section><div><p><code>function get_rdf(data::AbstractVector{&lt;: Atoms}, r_cut; kwargs...)</code> : </p><p>Produce a list of r values that occur in the dataset, restricted to the cutoff  radius <code>r_cut</code>. Keyword arguments: </p><ul><li><code>rescale = true</code> : resample the data to account for volume scaling, i.e. a distance r will be kept with probability <code>min(1, (r0/r)^2)</code>.</li><li><code>r0 = :min</code> : parameter for resampling. If <code>:min</code> then the minimum r occuring in the dataset is taken. </li><li><code>maxsamples = 100_000</code> : maximum number of samples to return. </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/analysis/dataset_analysis.jl#L17-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.make_model-Tuple{AbstractDict}"><a class="docstring-binding" href="#ACEpotentials.make_model-Tuple{AbstractDict}"><code>ACEpotentials.make_model</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">  make_model(model_dict::AbstractDict)</code></pre><p>User-facing script to generate a model from a dictionary. See documentation  for details.       </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/json_interface.jl#L42-L48">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.save_model-Tuple{Any, Any}"><a class="docstring-binding" href="#ACEpotentials.save_model-Tuple{Any, Any}"><code>ACEpotentials.save_model</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">  save_model(model, filename; kwargs...)</code></pre><p>save model constructor, model parameters, and other information to a JSON file. </p><ul><li><code>model</code> : the model to be saved</li><li><code>filename</code> : the name of the file to which the model will be saved</li><li><code>model_spec</code> : the arguments used to construct the model; without this            the model cannot be reconstructed unless the original script is available</li><li><code>errors</code> : the fitting / test errors computed during the fitting </li><li><code>verbose</code> : print information about the saving process     </li><li><code>save_project</code> : save Project.toml and Manifest.toml for reproducibility</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/json_interface.jl#L112-L124">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.trimer_energy-NTuple{7, Any}"><a class="docstring-binding" href="#ACEpotentials.trimer_energy-NTuple{7, Any}"><code>ACEpotentials.trimer_energy</code></a> — <span class="docstring-category">Method</span></summary><section><div><p><code>function trimer_energy(IP, r1, r2, θ, z0, z1, z2)</code> : computes the energy of a trimer, subtracting the 2-body and 1-body contributions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/analysis/potential_analysis.jl#L77-L80">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.trimers-NTuple{4, Any}"><a class="docstring-binding" href="#ACEpotentials.trimers-NTuple{4, Any}"><code>ACEpotentials.trimers</code></a> — <span class="docstring-category">Method</span></summary><section><div><p><code>trimers(potential, elements, r1, r2; kwargs...)</code> :  Generate a dictionary of trimer curves for a given potential. </p><ul><li><code>potential</code> : potential to use to evaluate energy </li><li><code>elements</code> : list of chemical species, symbols for which the trimers are to be computed</li><li><code>r1, r2</code> : distance between the central atom and the first, second neighbour</li></ul><p>The function returns a dictionary <code>Dtri</code> such that <code>D[(s1, s2, s3)]</code> contains  pairs or arrays <code>(θ, E)</code> which can be plotted <code>plot(θ, E)</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/analysis/potential_analysis.jl#L128-L138">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.ACE1_PolyEnvelope1sR"><a class="docstring-binding" href="#ACEpotentials.Models.ACE1_PolyEnvelope1sR"><code>ACEpotentials.Models.ACE1_PolyEnvelope1sR</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>The pair basis radial envelope implemented in ACE1.jl </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/models/radial_envelopes.jl#L25-L27">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.NormalizedTransform"><a class="docstring-binding" href="#ACEpotentials.Models.NormalizedTransform"><code>ACEpotentials.Models.NormalizedTransform</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Maps the transform <code>trans</code> to the standardized interval [-1, 1]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/models/radial_transforms.jl#L45-L47">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.OneBody"><a class="docstring-binding" href="#ACEpotentials.Models.OneBody"><code>ACEpotentials.Models.OneBody</code></a> — <span class="docstring-category">Type</span></summary><section><div><p><code>mutable struct OneBody{T}</code></p><p>this should not normally be constructed by a user, but instead E0 should be passed to the relevant model constructor, which will construct it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/models/onebody.jl#L19-L24">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models._make_smatrix-Tuple{Any, Any}"><a class="docstring-binding" href="#ACEpotentials.Models._make_smatrix-Tuple{Any, Any}"><code>ACEpotentials.Models._make_smatrix</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Takes an object and converts it to an <code>SMatrix{NZ, NZ}</code> via the following rules: </p><ul><li>if <code>obj</code> is already an <code>SMatrix{NZ, NZ}</code> then it just return <code>obj</code></li><li>if <code>obj</code> is an <code>AbstractMatrix</code> and <code>size(obj) == (NZ, NZ)</code> then it   converts it to an <code>SMatrix{NZ, NZ}</code> with the same entries.</li><li>otherwise it generates an <code>SMatrix{NZ, NZ}</code> filled with the value <code>obj</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/models/elements.jl#L36-L42">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models._mm_filter-Tuple{AbstractVector, Integer}"><a class="docstring-binding" href="#ACEpotentials.Models._mm_filter-Tuple{AbstractVector, Integer}"><code>ACEpotentials.Models._mm_filter</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Helper function to check if any signed combination of mm satisfies |sum| &lt;= L. Adapted from EquivariantModels.jl for migration to EquivariantTensors.jl.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/models/utils.jl#L8-L11">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models._rpe_filter_real-Tuple{Integer}"><a class="docstring-binding" href="#ACEpotentials.Models._rpe_filter_real-Tuple{Integer}"><code>ACEpotentials.Models._rpe_filter_real</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_rpe_filter_real(L::Integer)</code></pre><p>Filter for real spherical harmonics basis with equivariance level L. Replacement for EquivariantModels.RPE<em>filter</em>real.</p><p>Checks:</p><ol><li>m-quantum number compatibility (via lazy signed m-set)</li><li>Parity condition: sum(l) + L must be even</li><li>Special case: for L=0 with single element, l must be 0</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/models/utils.jl#L26-L36">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.agnesi_transform-NTuple{4, Any}"><a class="docstring-binding" href="#ACEpotentials.Models.agnesi_transform-NTuple{4, Any}"><code>ACEpotentials.Models.agnesi_transform</code></a> — <span class="docstring-category">Method</span></summary><section><div><p><code>function agnesi_transform:</code> constructs a generalized agnesi transform. </p><pre><code class="language-julia hljs">trans = agnesi_transform(r0, p, q)</code></pre><p>with <code>q &gt;= p</code>. This generates an <code>AnalyticTransform</code> object that implements </p><p class="math-container">\[   x(r) = \frac{1}{1 + a (r/r_0)^q / (1 + (r/r0)^(q-p))}\]</p><p>with default <code>a</code> chosen such that <span>$|x&#39;(r)|$</span> is maximised at <span>$r = r_0$</span>. But <code>a</code> may also be specified directly as a keyword argument. </p><p>The transform satisfies </p><p class="math-container">\[   x(r) \sim \frac{1}{1 + a (r/r_0)^p} \quad \text{as} \quad r \to 0 
   \quad \text{and} 
   \quad 
   x(r) \sim \frac{1}{1 + a (r/r_0)^p}  \quad \text{as} r \to \infty.\]</p><p>As default parameters we recommend <code>p = 2, q = 4</code> and the defaults for <code>a</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/models/radial_transforms.jl#L176-L196">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.get_nnll_spec-Tuple{ACEpotentials.Models.ACEModel}"><a class="docstring-binding" href="#ACEpotentials.Models.get_nnll_spec-Tuple{ACEpotentials.Models.ACEModel}"><code>ACEpotentials.Models.get_nnll_spec</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Get the specification of the BBbasis as a list (<code>Vector</code>) of vectors of <code>@NamedTuple{n::Int, l::Int}</code>.</p><p><strong>Parameters</strong></p><ul><li><code>model</code> : an ACEModel</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/models/utils.jl#L150-L156">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.set_onehot_weights!-Tuple{ACEpotentials.Models.LearnableRnlrzzBasis, Any}"><a class="docstring-binding" href="#ACEpotentials.Models.set_onehot_weights!-Tuple{ACEpotentials.Models.LearnableRnlrzzBasis, Any}"><code>ACEpotentials.Models.set_onehot_weights!</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Set the radial weights as they would be in a linear ACE model. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/models/Rnl_learnable.jl#L80-L82">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.sparse_AA_spec-Tuple{}"><a class="docstring-binding" href="#ACEpotentials.Models.sparse_AA_spec-Tuple{}"><code>ACEpotentials.Models.sparse_AA_spec</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>This is one of the most important functions to generate an ACE model with  sparse AA basis. It generates the AA basis specification as a list (<code>Vector</code>) of vectors of <code>@NamedTuple{n::Int, l::Int, m::Int}</code>.</p><p><strong>Parameters</strong></p><ul><li><code>order</code> : maximum correlation order </li><li><code>r_spec</code> : radial basis specification in the format <code>Vector{@NamedTuple{a::Int64, b::Int64}}</code></li><li><code>max_level</code> : maximum level of the basis, either a single scalar, or an iterable (one for each order)</li><li><code>level</code> : a function that computes the level of a basis element; see e.g. <code>TotalDegree</code> and <code>EuclideanDegree</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/models/utils.jl#L77-L88">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.ETACEPotential"><a class="docstring-binding" href="#ACEpotentials.ETModels.ETACEPotential"><code>ACEpotentials.ETModels.ETACEPotential</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ETACEPotential</code></pre><p>AtomsCalculators-compatible calculator wrapping an ETACE model. This is a type alias for <code>WrappedSiteCalculator{&lt;:ETACE, PS, ST}</code>.</p><p>Access underlying components via:</p><ul><li><code>calc.model</code> - The ETACE model</li><li><code>calc.ps</code> - Model parameters</li><li><code>calc.st</code> - Model state</li><li><code>calc.rcut</code> - Cutoff radius in Ångström</li><li><code>calc.co_ps</code> - Committee parameters (optional)</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">calc = ETACEPotential(et_model, ps, st, 5.5)
E = potential_energy(sys, calc)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L170-L188">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.ETOneBodyPotential"><a class="docstring-binding" href="#ACEpotentials.ETModels.ETOneBodyPotential"><code>ACEpotentials.ETModels.ETOneBodyPotential</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ETOneBodyPotential</code></pre><p>AtomsCalculators-compatible calculator wrapping an ETOneBody model. This is a type alias for <code>WrappedSiteCalculator{&lt;:ETOneBody, PS, ST}</code>.</p><p>ETOneBody has no learnable parameters, so training assembly returns empty results:</p><ul><li><code>length_basis(calc)</code> returns 0</li><li><code>energy_forces_virial_basis(sys, calc)</code> returns empty arrays</li><li>Forces and virial are always zero (energy only depends on atom types)</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">et_onebody = one_body(Dict(:Si =&gt; -0.846), x -&gt; x.z)
_, st = Lux.setup(rng, et_onebody)
calc = ETOneBodyPotential(et_onebody, nothing, st, 3.0)
E = potential_energy(sys, calc)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L581-L599">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.ETPairPotential"><a class="docstring-binding" href="#ACEpotentials.ETModels.ETPairPotential"><code>ACEpotentials.ETModels.ETPairPotential</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ETPairPotential</code></pre><p>AtomsCalculators-compatible calculator wrapping an ETPairModel. This is a type alias for <code>WrappedSiteCalculator{&lt;:ETPairModel, PS, ST}</code>.</p><p>Supports training assembly functions:</p><ul><li><code>length_basis(calc)</code> - Total linear parameters</li><li><code>energy_forces_virial_basis(sys, calc)</code> - Full EFV design row</li><li><code>potential_energy_basis(sys, calc)</code> - Energy design row</li><li><code>get_linear_parameters(calc)</code> / <code>set_linear_parameters!(calc, θ)</code></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">et_pair = convertpair(model)
ps, st = Lux.setup(rng, et_pair)
calc = ETPairPotential(et_pair, ps, st, 5.5)
E = potential_energy(sys, calc)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L396-L415">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.EnvRBranchL"><a class="docstring-binding" href="#ACEpotentials.ETModels.EnvRBranchL"><code>ACEpotentials.ETModels.EnvRBranchL</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>struct EnvRBranchL</p><p>An auxiliary layer that is basically a branch layer needed to build   radial bases, with additional evaluate_ed functionality, needed for  Jacobians. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_envbranch.jl#L8-L14">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.StackedCalculator"><a class="docstring-binding" href="#ACEpotentials.ETModels.StackedCalculator"><code>ACEpotentials.ETModels.StackedCalculator</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">StackedCalculator{N, C&lt;:Tuple}</code></pre><p>Combines multiple AtomsCalculators by summing their energy, forces, and virial. Each calculator in the tuple must implement the AtomsCalculators interface.</p><p>This allows combining site-based calculators (via WrappedSiteCalculator) with calculators that don&#39;t have site decompositions (e.g., Coulomb, dispersion).</p><p>The implementation uses compile-time loop unrolling for efficiency when the number of calculators is small and known at compile time.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs"># Wrap site energy models
E0_calc = WrappedSiteCalculator(E0Model(Dict(:Si =&gt; -0.846)))
ace_calc = WrappedSiteCalculator(WrappedETACE(et_model, ps, st, 5.5))

# Stack them (could also add Coulomb, dispersion, etc.)
calc = StackedCalculator((E0_calc, ace_calc))

E = potential_energy(sys, calc)
F = forces(sys, calc)</code></pre><p><strong>Fields</strong></p><ul><li><code>calcs::Tuple</code> - Tuple of N calculators implementing AtomsCalculators interface</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/stackedcalc.jl#L16-L43">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.WrappedSiteCalculator"><a class="docstring-binding" href="#ACEpotentials.ETModels.WrappedSiteCalculator"><code>ACEpotentials.ETModels.WrappedSiteCalculator</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">WrappedSiteCalculator{M, PS, ST}</code></pre><p>Wraps any ETACE-pattern model (ETACE, ETPairModel, ETOneBody) and provides the AtomsCalculators interface.</p><p>All wrapped models must implement the ETACE interface:</p><ul><li><code>model(G, ps, st)</code> → <code>(site_energies, st)</code></li><li><code>site_grads(model, G, ps, st)</code> → edge gradients</li></ul><p>Mutable to allow parameter updates during training.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs"># With ETACE model
calc = WrappedSiteCalculator(et_model, ps, st, 5.5)

# With ETOneBody (upstream)
et_onebody = ETM.one_body(Dict(:Si =&gt; -0.846), x -&gt; x.z)
_, onebody_st = Lux.setup(rng, et_onebody)
calc = WrappedSiteCalculator(et_onebody, nothing, onebody_st, 3.0)

E = potential_energy(sys, calc)
F = forces(sys, calc)</code></pre><p><strong>Fields</strong></p><ul><li><code>model</code> - ETACE-pattern model (ETACE, ETPairModel, or ETOneBody)</li><li><code>ps</code> - Model parameters (can be <code>nothing</code> for ETOneBody)</li><li><code>st</code> - Model state</li><li><code>rcut::Float64</code> - Cutoff radius for graph construction (Å)</li><li><code>co_ps</code> - Optional committee parameters for uncertainty quantification</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L32-L64">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.convert2et_full-Tuple{Any, Any, Any}"><a class="docstring-binding" href="#ACEpotentials.ETModels.convert2et_full-Tuple{Any, Any, Any}"><code>ACEpotentials.ETModels.convert2et_full</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convert2et_full(model, ps, st; rng=default_rng()) -&gt; StackedCalculator</code></pre><p>Convert a complete ACE model (E0 + Pair + Many-body) to an ETACE-based StackedCalculator. This creates a calculator that combines:</p><ol><li>ETOneBody - reference energies per species</li><li>ETPairModel - pair potential</li><li>ETACE - many-body ACE potential</li></ol><p>The returned StackedCalculator is fully compatible with AtomsCalculators and can be used for energy, forces, and virial evaluation.</p><p><strong>Arguments</strong></p><ul><li><code>model</code>: ACE model (from ACEpotentials.Models)</li><li><code>ps</code>: Model parameters (from Lux.setup)</li><li><code>st</code>: Model state (from Lux.setup)</li><li><code>rng</code>: Random number generator (default: <code>default_rng()</code>)</li></ul><p><strong>Returns</strong></p><ul><li><code>StackedCalculator</code> combining ETOneBody, ETPairModel, and ETACE</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">model = ace_model(elements=[:Si], order=3, totaldegree=8)
ps, st = Lux.setup(rng, model)
# ... fit model ...
calc = convert2et_full(model, ps, st)
E = potential_energy(sys, calc)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L669-L698">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.copy_ace_params!-Tuple{Any, Any, Any}"><a class="docstring-binding" href="#ACEpotentials.ETModels.copy_ace_params!-Tuple{Any, Any, Any}"><code>ACEpotentials.ETModels.copy_ace_params!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">copy_ace_params!(et_ps, ps, model)</code></pre><p>Copy many-body (ACE) parameters from ACE model format to ETACE format.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L733-L737">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.copy_pair_params!-Tuple{Any, Any, Any}"><a class="docstring-binding" href="#ACEpotentials.ETModels.copy_pair_params!-Tuple{Any, Any, Any}"><code>ACEpotentials.ETModels.copy_pair_params!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">copy_pair_params!(et_ps, ps, model)</code></pre><p>Copy pair potential parameters from ACE model format to ETPairModel format. Based on parameter mapping from test/etmodels/test_etpair.jl.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L759-L764">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.get_linear_parameters-Tuple{ACEpotentials.ETModels.StackedCalculator}"><a class="docstring-binding" href="#ACEpotentials.ETModels.get_linear_parameters-Tuple{ACEpotentials.ETModels.StackedCalculator}"><code>ACEpotentials.ETModels.get_linear_parameters</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">get_linear_parameters(calc::StackedCalculator)</code></pre><p>Get concatenated linear parameters from all stacked calculators.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/stackedcalc.jl#L194-L198">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.get_linear_parameters-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETACE}"><a class="docstring-binding" href="#ACEpotentials.ETModels.get_linear_parameters-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETACE}"><code>ACEpotentials.ETModels.get_linear_parameters</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">get_linear_parameters(calc::ETACEPotential)</code></pre><p>Extract the linear parameters (readout weights) as a flat vector. Parameters are ordered as: [W[1,:,1]; W[1,:,2]; ... ; W[1,:,nspecies]]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L363-L368">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.get_linear_parameters-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETOneBody}"><a class="docstring-binding" href="#ACEpotentials.ETModels.get_linear_parameters-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETOneBody}"><code>ACEpotentials.ETModels.get_linear_parameters</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">get_linear_parameters(calc::ETOneBodyPotential)</code></pre><p>Return empty vector - ETOneBody has no learnable parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L644-L648">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.get_linear_parameters-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETPairModel}"><a class="docstring-binding" href="#ACEpotentials.ETModels.get_linear_parameters-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETPairModel}"><code>ACEpotentials.ETModels.get_linear_parameters</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">get_linear_parameters(calc::ETPairPotential)</code></pre><p>Extract the linear parameters (readout weights) as a flat vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L550-L554">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.one_body-Tuple{Dict, Any}"><a class="docstring-binding" href="#ACEpotentials.ETModels.one_body-Tuple{Dict, Any}"><code>ACEpotentials.ETModels.one_body</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>one_body(D::Dict, catfun)</p><p>Create a one-body energy model that assigns to each atom an energy based on  a categorical variable that is extracted from the atom state via  <code>catfun</code>. The dictionary <code>D</code> contains category-value pairs. The one-body  energy assigned to an atom with state <code>x</code> is <code>D[catfun(x)]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/onebody.jl#L16-L23">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.set_linear_parameters!-Tuple{ACEpotentials.ETModels.StackedCalculator, AbstractVector}"><a class="docstring-binding" href="#ACEpotentials.ETModels.set_linear_parameters!-Tuple{ACEpotentials.ETModels.StackedCalculator, AbstractVector}"><code>ACEpotentials.ETModels.set_linear_parameters!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">set_linear_parameters!(calc::StackedCalculator, θ::AbstractVector)</code></pre><p>Set linear parameters for all stacked calculators from concatenated vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/stackedcalc.jl#L203-L207">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.set_linear_parameters!-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETACE, AbstractVector}"><a class="docstring-binding" href="#ACEpotentials.ETModels.set_linear_parameters!-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETACE, AbstractVector}"><code>ACEpotentials.ETModels.set_linear_parameters!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">set_linear_parameters!(calc::ETACEPotential, θ::AbstractVector)</code></pre><p>Set the linear parameters (readout weights) from a flat vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L373-L377">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.set_linear_parameters!-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETOneBody, AbstractVector}"><a class="docstring-binding" href="#ACEpotentials.ETModels.set_linear_parameters!-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETOneBody, AbstractVector}"><code>ACEpotentials.ETModels.set_linear_parameters!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">set_linear_parameters!(calc::ETOneBodyPotential, θ::AbstractVector)</code></pre><p>No-op for ETOneBody (no learnable parameters).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L651-L655">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.ETModels.set_linear_parameters!-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETPairModel, AbstractVector}"><a class="docstring-binding" href="#ACEpotentials.ETModels.set_linear_parameters!-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETPairModel, AbstractVector}"><code>ACEpotentials.ETModels.set_linear_parameters!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">set_linear_parameters!(calc::ETPairPotential, θ::AbstractVector)</code></pre><p>Set the linear parameters (readout weights) from a flat vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L559-L563">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.energy_forces_virial_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.StackedCalculator}"><a class="docstring-binding" href="#ACEpotentials.Models.energy_forces_virial_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.StackedCalculator}"><code>ACEpotentials.Models.energy_forces_virial_basis</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">energy_forces_virial_basis(sys::AbstractSystem, calc::StackedCalculator)</code></pre><p>Compute concatenated basis for all stacked calculators.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/stackedcalc.jl#L136-L140">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.energy_forces_virial_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETACE}"><a class="docstring-binding" href="#ACEpotentials.Models.energy_forces_virial_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETACE}"><code>ACEpotentials.Models.energy_forces_virial_basis</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">energy_forces_virial_basis(sys::AbstractSystem, calc::ETACEPotential)</code></pre><p>Compute the basis functions for energy, forces, and virial. Returns a named tuple with:</p><ul><li><code>energy::Vector{Float64}</code> - length = length_basis(calc)</li><li><code>forces::Matrix{SVector{3,Float64}}</code> - size = (natoms, length_basis)</li><li><code>virial::Vector{SMatrix{3,3,Float64}}</code> - length = length_basis(calc)</li></ul><p>The linear combination of basis values with parameters gives:   E = dot(energy, params)   F = forces * params   V = sum(params .* virial)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L232-L245">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.energy_forces_virial_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETOneBody}"><a class="docstring-binding" href="#ACEpotentials.Models.energy_forces_virial_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETOneBody}"><code>ACEpotentials.Models.energy_forces_virial_basis</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">energy_forces_virial_basis(sys::AbstractSystem, calc::ETOneBodyPotential)</code></pre><p>Return empty arrays - ETOneBody has no learnable parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L623-L627">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.energy_forces_virial_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETPairModel}"><a class="docstring-binding" href="#ACEpotentials.Models.energy_forces_virial_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETPairModel}"><code>ACEpotentials.Models.energy_forces_virial_basis</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">energy_forces_virial_basis(sys::AbstractSystem, calc::ETPairPotential)</code></pre><p>Compute the basis functions for energy, forces, and virial for pair potential.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L445-L449">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.length_basis-Tuple{ACEpotentials.ETModels.StackedCalculator}"><a class="docstring-binding" href="#ACEpotentials.Models.length_basis-Tuple{ACEpotentials.ETModels.StackedCalculator}"><code>ACEpotentials.Models.length_basis</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">length_basis(calc::StackedCalculator)</code></pre><p>Return total number of linear parameters across all stacked calculators.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/stackedcalc.jl#L125-L129">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.length_basis-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETACE}"><a class="docstring-binding" href="#ACEpotentials.Models.length_basis-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETACE}"><code>ACEpotentials.Models.length_basis</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">length_basis(calc::ETACEPotential)</code></pre><p>Return the number of linear parameters in the model (nbasis * nspecies).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L216-L220">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.length_basis-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETOneBody}"><a class="docstring-binding" href="#ACEpotentials.Models.length_basis-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETOneBody}"><code>ACEpotentials.Models.length_basis</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">length_basis(calc::ETOneBodyPotential)</code></pre><p>Return 0 - ETOneBody has no learnable linear parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L614-L618">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.length_basis-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETPairModel}"><a class="docstring-binding" href="#ACEpotentials.Models.length_basis-Tuple{ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETPairModel}"><code>ACEpotentials.Models.length_basis</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">length_basis(calc::ETPairPotential)</code></pre><p>Return the number of linear parameters in the pair model (nbasis * nspecies).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L431-L435">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.potential_energy_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.StackedCalculator}"><a class="docstring-binding" href="#ACEpotentials.Models.potential_energy_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.StackedCalculator}"><code>ACEpotentials.Models.potential_energy_basis</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">potential_energy_basis(sys::AbstractSystem, calc::StackedCalculator)</code></pre><p>Compute concatenated energy basis for all stacked calculators.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/stackedcalc.jl#L183-L187">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.potential_energy_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETACE}"><a class="docstring-binding" href="#ACEpotentials.Models.potential_energy_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETACE}"><code>ACEpotentials.Models.potential_energy_basis</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">potential_energy_basis(sys::AbstractSystem, calc::ETACEPotential)</code></pre><p>Compute only the energy basis (faster when forces/virial not needed).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L328-L332">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.potential_energy_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETOneBody}"><a class="docstring-binding" href="#ACEpotentials.Models.potential_energy_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETOneBody}"><code>ACEpotentials.Models.potential_energy_basis</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">potential_energy_basis(sys::AbstractSystem, calc::ETOneBodyPotential)</code></pre><p>Return empty array - ETOneBody has no learnable parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L637-L641">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ACEpotentials.Models.potential_energy_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETPairModel}"><a class="docstring-binding" href="#ACEpotentials.Models.potential_energy_basis-Tuple{AtomsBase.AbstractSystem, ACEpotentials.ETModels.WrappedSiteCalculator{MOD} where MOD&lt;:ACEpotentials.ETModels.ETPairModel}"><code>ACEpotentials.Models.potential_energy_basis</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">potential_energy_basis(sys::AbstractSystem, calc::ETPairPotential)</code></pre><p>Compute only the energy basis for pair potential.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/efc50cedb61937b74bd47cde793a85f77c7db551/src/et_models/et_calculators.jl#L518-L522">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../gettingstarted/pkg/">« Using the Julia Package Manager</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Tuesday 6 January 2026 10:22">Tuesday 6 January 2026</span>. Using Julia version 1.12.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
