<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic Dataset Analysis · ACEpotentials.jl</title><meta name="title" content="Basic Dataset Analysis · ACEpotentials.jl"/><meta property="og:title" content="Basic Dataset Analysis · ACEpotentials.jl"/><meta property="twitter:title" content="Basic Dataset Analysis · ACEpotentials.jl"/><meta name="description" content="Documentation for ACEpotentials.jl."/><meta property="og:description" content="Documentation for ACEpotentials.jl."/><meta property="twitter:description" content="Documentation for ACEpotentials.jl."/><meta property="og:url" content="https://ACEsuit.github.io/ACEpotentials.jl/literate_tutorials/dataset_analysis/"/><meta property="twitter:url" content="https://ACEsuit.github.io/ACEpotentials.jl/literate_tutorials/dataset_analysis/"/><link rel="canonical" href="https://ACEsuit.github.io/ACEpotentials.jl/literate_tutorials/dataset_analysis/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ACEpotentials.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../gettingstarted/installation/">Installation</a></li><li><a class="tocitem" href="../../gettingstarted/saving-and-loading/">Saving and Loading Potentials</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/">Tutorials Overview</a></li><li><a class="tocitem" href="../basic_julia_workflow/">Basic Workflow</a></li><li><a class="tocitem" href="../smoothness_priors/">Smoothness Priors</a></li><li class="is-active"><a class="tocitem" href>Basic Dataset Analysis</a></li><li><a class="tocitem" href="../../tutorials/scripting/">Basic Shell Workflow</a></li></ul></li><li><span class="tocitem">Additional Topics</span><ul><li><a class="tocitem" href="../../gettingstarted/parallel-fitting/">Parallel Fitting</a></li><li><a class="tocitem" href="../../gettingstarted/aceintro/">Introduction to ACE Models</a></li><li><a class="tocitem" href="../../gettingstarted/pkg/">Using the Julia Package Manager</a></li></ul></li><li><a class="tocitem" href="../../all_exported/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Basic Dataset Analysis</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Basic Dataset Analysis</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/main/docs/src/tutorials/dataset_analysis.jl#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Basic-Dataset-Analysis"><a class="docs-heading-anchor" href="#Basic-Dataset-Analysis">Basic Dataset Analysis</a><a id="Basic-Dataset-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Dataset-Analysis" title="Permalink"></a></h1><p>In this tutorial we show some basic tools in ACEpotentials to analyze a dataset and how this connects to a model construction. As usual we start by importing the relevant packages. For plotting we will use <code>Plots.jl</code> and <code>LaTexStrings</code> for nice labels.</p><pre><code class="language-julia hljs">using ACEpotentials, Plots, LaTeXStrings, Unitful
using AtomsBuilder: bulk, rattle!
using AtomsBuilder.Chemistry: rnn     # estimates nn distance for some elements</code></pre><p>Let&#39;s generate a naive dataset, just some random bulk Si structures that are rattled a bit.</p><pre><code class="language-julia hljs">rand_Si() = rattle!(bulk(:Si, cubic=true) * rand([2,3,4]), 0.25)
Si_data = [ rand_Si() for _=1:50 ];</code></pre><p>Two basic distributions we can look at to see how well the data fills in space are the radial and angular distribution functions. For the radial distribution function we use the cutoff of the model (see below). For the angular distribution we use a cutoff just above the nearest neighbour distance to we can clearly see the equilibrium bond-angles.</p><pre><code class="language-julia hljs">r_cut = 6.0 * u&quot;Å&quot;
rdf = ACEpotentials.get_rdf(Si_data, r_cut; rescale = true)

r_cut_adf = 1.25 * rnn(:Si)
adf = ACEpotentials.get_adf(Si_data, r_cut_adf);</code></pre><p>We can plot these distributions using the <code>histogram</code> function in <code>Plots.jl</code>. For the RDF we add some vertical lines to indicate the distances and first, second neighbours and so forth to confirm that the peaks are in the right place. For the ADF we add a vertical line to indicate the equilibrium bond angle.</p><pre><code class="language-julia hljs">plt_rdf = histogram(ustrip.(rdf[(:Si, :Si)]), bins=150, label = &quot;rdf&quot;,
                     xlabel = L&quot;r [\AA]&quot;, ylabel = &quot;RDF&quot;, yticks = [])
vline!(ustrip(rnn(:Si)) * [1.0, 1.633, 1.915, 2.3, 2.5], label = &quot;r1, r2, ...&quot;, lw=3)

eq_angle = 1.91 # radians
plt_adf = histogram(adf, bins=25, label = &quot;adf&quot;, yticks = [], c = 3,
                    xlabel = L&quot;\theta&quot;, ylabel = &quot;ADF&quot;, xlims = (0, π))
vline!([ eq_angle,], label = &quot;109.5˚&quot;, lw=3)

plot(plt_rdf, plt_adf, layout = (2,1), size = (800, 400))</code></pre><img src="bd749319.svg" alt="Example block output"/><p>One way we can use these distribution functions is to look at fitted potentials relative to where data is given. But even before a potential is fitted we can illustrate some properties of the basis functions used in ACEpotentials. E.g. we can illustrate why we have chosen the distance transforms. First, we generate a default Si model and a second one with modified transform. Note that we are stripping the units from <code>r_cut</code> because <code>ACEpotentials</code> currently expects unitless values; implicitly understood as Å and eV.</p><pre><code class="language-julia hljs">r_cut_ul = ustrip(u&quot;Å&quot;, r_cut)

model1 = ace1_model(elements = [:Si,], order = 3,
                    totaldegree = 10, rcut = r_cut_ul)

model2 = ace1_model(elements = [:Si,], order = 3,
                    totaldegree = 10, rcut = r_cut_ul,
                    transform = (:agnesi, 2, 2) );</code></pre><p>We have a utility function <code>get_transforms</code> that extracts the transforms from the model. We can then plot the transform gradients. In regions of r space with high gradient we have higher resolution. We see that the transforms concentrate resolution near the nearest neighbour distance and ensure there is no resolution at all near <span>$r = 0$</span>. The transform for the second model distributes resolution much more evenly across the radial domain. We use ForwardDiff to differentiate the transforms.</p><pre><code class="language-julia hljs">using ForwardDiff
trans1, trans1_pair = ACEpotentials.get_transforms(model1)
trans2, trans2_pair = ACEpotentials.get_transforms(model2)
∇t1 = r -&gt; ForwardDiff.derivative(trans1[(:Si, :Si)], r)
∇t2 = r -&gt; ForwardDiff.derivative(trans2[(:Si, :Si)], r)
rp = range(0.0, r_cut_ul, length = 200)

plt_t = plot(rp, abs.(∇t1.(rp)), lw=3,
             xlabel = L&quot;r [\AA]&quot;, label = L&quot;|t_1&#39;(r)|&quot;,
             yticks = [], ylabel = &quot;&quot;, xlims = (0, r_cut_ul))
plot!(plt_t, rp, abs.(∇t2.(rp)), lw=3, label = L&quot;|t_2&#39;(r)&quot;)
vline!([ustrip(rnn(:Si)),], lw=2, label = L&quot;r_{\rm nn}&quot;)

plt_rdf = histogram(rdf[(:Si, :Si)], bins=100, label = &quot;rdf&quot;,
                     xlabel = L&quot;r [\AA]&quot;, ylabel = &quot;RDF&quot;,
                     yticks = [], xlims = (0, r_cut_ul))
vline!([ustrip(rnn(:Si)),], label = L&quot;r_{\rm nn}&quot;, lw=3)

plot(plt_t, plt_rdf, layout=grid(2, 1, heights=[0.7, 0.3]), size = (800, 400))</code></pre><img src="183e847c.svg" alt="Example block output"/><p>To finish this tutorial, we quickly demonstrate what happens when there is more than one chemical species present in a dataset.</p><pre><code class="language-julia hljs">tial_data, _, _ = ACEpotentials.example_dataset(&quot;TiAl_tutorial&quot;)

rdf = ACEpotentials.get_rdf(tial_data, r_cut)
plt_TiTi = histogram(rdf[(:Ti, :Ti)], bins=100, xlabel = &quot;&quot;, c = 1,
         ylabel = &quot;RDF - TiTi&quot;, label = &quot;&quot;, yticks = [], xlims = (0, r_cut_ul) )
plt_TiAl = histogram(rdf[(:Ti, :Ti)], bins=100, xlabel = &quot;&quot;, c = 2,
         ylabel = &quot;RDF - TiAl&quot;, label = &quot;&quot;, yticks = [], xlims = (0, r_cut_ul) )
plt_AlAl = histogram(rdf[(:Al, :Al)], bins=100, xlabel = L&quot;r [\AA]&quot;, c = 3,
         ylabel = &quot;RDF - AlAl&quot;, label = &quot;&quot;, yticks = [], xlims = (0, r_cut_ul), )
plot(plt_TiTi, plt_TiAl, plt_AlAl, layout = (3,1), size = (700, 700))</code></pre><img src="7035f892.svg" alt="Example block output"/><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../smoothness_priors/">« Smoothness Priors</a><a class="docs-footer-nextpage" href="../../tutorials/scripting/">Basic Shell Workflow »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Wednesday 11 September 2024 21:19">Wednesday 11 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
