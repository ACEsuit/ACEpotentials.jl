<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic Workflow · ACEpotentials.jl</title><meta name="title" content="Basic Workflow · ACEpotentials.jl"/><meta property="og:title" content="Basic Workflow · ACEpotentials.jl"/><meta property="twitter:title" content="Basic Workflow · ACEpotentials.jl"/><meta name="description" content="Documentation for ACEpotentials.jl."/><meta property="og:description" content="Documentation for ACEpotentials.jl."/><meta property="twitter:description" content="Documentation for ACEpotentials.jl."/><meta property="og:url" content="https://ACEsuit.github.io/ACEpotentials.jl/literate_tutorials/basic_julia_workflow/"/><meta property="twitter:url" content="https://ACEsuit.github.io/ACEpotentials.jl/literate_tutorials/basic_julia_workflow/"/><link rel="canonical" href="https://ACEsuit.github.io/ACEpotentials.jl/literate_tutorials/basic_julia_workflow/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ACEpotentials.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../gettingstarted/installation/">Installation</a></li><li><a class="tocitem" href="../../gettingstarted/saving-and-loading/">Saving and Loading Potentials</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/">Tutorials Overview</a></li><li class="is-active"><a class="tocitem" href>Basic Workflow</a></li><li><a class="tocitem" href="../smoothness_priors/">Smoothness Priors</a></li><li><a class="tocitem" href="../dataset_analysis/">Basic Dataset Analysis</a></li><li><a class="tocitem" href="../../tutorials/scripting/">Basic Shell Workflow</a></li><li><a class="tocitem" href="../descriptor/">ACE Descriptors</a></li><li><a class="tocitem" href="../asp/">Sparse Solvers</a></li><li><a class="tocitem" href="../etace_tutorial/">ETACE Models Tutorial</a></li></ul></li><li><span class="tocitem">Additional Topics</span><ul><li><a class="tocitem" href="../../gettingstarted/parallel-fitting/">Parallel Fitting</a></li><li><a class="tocitem" href="../../gettingstarted/aceintro/">Introduction to ACE Models</a></li><li><a class="tocitem" href="../../gettingstarted/pkg/">Using the Julia Package Manager</a></li></ul></li><li><a class="tocitem" href="../../all_exported/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Basic Workflow</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Basic Workflow</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ACEsuit/ACEpotentials.jl/blob/main/docs/src/tutorials/basic_julia_workflow.jl#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Basic-Workflow"><a class="docs-heading-anchor" href="#Basic-Workflow">Basic Workflow</a><a id="Basic-Workflow-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Workflow" title="Permalink"></a></h1><p>This short tutorial introduces the minimal workflow for people working purely in Julia. There are (or are in development) separate tutorials on using <code>ACEpotentials</code> via shell scripts or via Python, and tutorials on more advanced usage.</p><p>Start by importing <code>ACEpotentials</code> (and possibly other required libraries)</p><pre><code class="language-julia hljs">using ACEpotentials</code></pre><p>We need a dataset <code>TiAl_tutorial.xyz</code> for this tutorial. Normally we would get the path to a datset and then use <code>read_extxyz</code> to load in the training set.</p><pre><code class="language-julia hljs"># (don&#39;t execute this block)
using ExtXYZ
data_file = &quot;path/to/TiAl_tutorial.xyz&quot;
data = ExtXYZ.load(data_file)</code></pre><p>For convenience we provide this dataset as a <a href="https://docs.julialang.org/en/v1/stdlib/Artifacts/">Julia artifact</a> and make it accessible via <code>ACEpotentials.example_dataset</code>. We keep only a small subset of the structures for training and testing to keep the regression problem small.</p><pre><code class="language-julia hljs">data, _, meta = ACEpotentials.example_dataset(&quot;TiAl_tutorial&quot;)
train_data = data[1:5:end];
test_data = data[2:10:end];</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr32"><span class="sgr1"> Downloading</span></span> artifact: TiAl_tutorial</code></pre><p>The next step is to generate a model. Here we generate a linear ACE model using the <code>ACE1compat</code> interface, which generates models that are essentially equivalent to those provided by the discontinued <code>ACE1.jl</code> package.</p><ul><li><code>order = 3</code> : We take 3-correlation, i.e. a 4-body potential,</li><li><code>totaldegree = 6</code> : a very low polynomial degree just for testing</li><li><code>rcut = 5.5</code> : this is a typical cutoff radius for metals</li></ul><p>These three are the most important approximation parameters to explore when trying to improve the fit-accuracy. There are many other parameters to explore, which are documented in <code>?acemodel</code>. Even further model refinements are possible by studying the internals of <code>ACE1.jl</code> and <code>ACE1x.jl</code>. We also specify a reference potential that will be added to the learned 2-body and many-body potential components. Here we use a one-body potential i.e. a reference atom energy for each individual species. Usage of a one-body reference potential generally results in very slightly reduced fit accuracy but significantly improved 2-body potentials with a realistic dimer shape and improved robustness in predictions.</p><pre><code class="language-julia hljs">hyperparams = (elements = [:Ti, :Al],
					order = 3,
					totaldegree = 6,
					rcut = 5.5,
					Eref = [:Ti =&gt; -1586.0195, :Al =&gt; -105.5954])
model = ace1_model(; hyperparams...)
@show length_basis(model);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">length_basis(model) = 270</code></pre><p>The next line specifies the regression weights: in the least squares loss different observations are given different weights,</p><p class="math-container">\[  \sum_{R} \Big( w_{E,R}^2 | E(R) - y_R^E |^2
           + w_{F,R}^2 | {\rm forces}(R) - y_R^F |^2
           + w_{V,R}^2 | {\rm virial}(R) - y_R^V |^2 \Big),\]</p><p>and this is specificed via the following dictionary. The keys correspond to the <code>config_type</code> of the training structures.</p><pre><code class="language-julia hljs">weights = Dict(
        &quot;FLD_TiAl&quot; =&gt; Dict(&quot;E&quot; =&gt; 60.0, &quot;F&quot; =&gt; 1.0 , &quot;V&quot; =&gt; 1.0 ),
        &quot;TiAl_T5000&quot; =&gt; Dict(&quot;E&quot; =&gt; 5.0, &quot;F&quot; =&gt; 1.0 , &quot;V&quot; =&gt; 1.0 ));</code></pre><p>To estimate the parameters we still need to choose a solver for the least squares system. In this tutorial we use a Bayesian linear regression, which is the recommended default at the moment. Many other solvers are available, and can be explored by looking at the documentation of <a href="https://github.com/ACEsuit/ACEfit.jl"><code>ACEfit.jl</code></a>.</p><pre><code class="language-julia hljs">solver = ACEfit.BLR()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ACEfit.BLR(Dict{Any, Any}())</code></pre><p>ACEpotentials provides a heuristic smoothness prior which assigns to each basis function <code>Bi</code> a scaling parameter <code>si</code> that estimates how &quot;rough&quot; that basis function is. The following line generates a regularizer (prior) with <code>si^q</code> on the diagonal, thus penalizing rougher basis functions and enforcing a smoother fitted potential.</p><pre><code class="language-julia hljs">P = algebraic_smoothness_prior(model; p = 4)    #  (p = 4 is in fact the default)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">270×270 LinearAlgebra.Diagonal{Float64, Vector{Float64}}:
 1.0    ⋅     ⋅      ⋅      ⋅       ⋅   …      ⋅        ⋅        ⋅        ⋅ 
  ⋅   16.0    ⋅      ⋅      ⋅       ⋅          ⋅        ⋅        ⋅        ⋅ 
  ⋅     ⋅   81.0     ⋅      ⋅       ⋅          ⋅        ⋅        ⋅        ⋅ 
  ⋅     ⋅     ⋅   256.0     ⋅       ⋅          ⋅        ⋅        ⋅        ⋅ 
  ⋅     ⋅     ⋅      ⋅   625.0      ⋅          ⋅        ⋅        ⋅        ⋅ 
  ⋅     ⋅     ⋅      ⋅      ⋅   1296.0  …      ⋅        ⋅        ⋅        ⋅ 
  ⋅     ⋅     ⋅      ⋅      ⋅       ⋅          ⋅        ⋅        ⋅        ⋅ 
  ⋅     ⋅     ⋅      ⋅      ⋅       ⋅          ⋅        ⋅        ⋅        ⋅ 
  ⋅     ⋅     ⋅      ⋅      ⋅       ⋅          ⋅        ⋅        ⋅        ⋅ 
  ⋅     ⋅     ⋅      ⋅      ⋅       ⋅          ⋅        ⋅        ⋅        ⋅ 
 ⋮                                 ⋮    ⋱                            
  ⋅     ⋅     ⋅      ⋅      ⋅       ⋅          ⋅        ⋅        ⋅        ⋅ 
  ⋅     ⋅     ⋅      ⋅      ⋅       ⋅          ⋅        ⋅        ⋅        ⋅ 
  ⋅     ⋅     ⋅      ⋅      ⋅       ⋅          ⋅        ⋅        ⋅        ⋅ 
  ⋅     ⋅     ⋅      ⋅      ⋅       ⋅          ⋅        ⋅        ⋅        ⋅ 
  ⋅     ⋅     ⋅      ⋅      ⋅       ⋅   …      ⋅        ⋅        ⋅        ⋅ 
  ⋅     ⋅     ⋅      ⋅      ⋅       ⋅      6561.0       ⋅        ⋅        ⋅ 
  ⋅     ⋅     ⋅      ⋅      ⋅       ⋅          ⋅   10000.0       ⋅        ⋅ 
  ⋅     ⋅     ⋅      ⋅      ⋅       ⋅          ⋅        ⋅   14641.0       ⋅ 
  ⋅     ⋅     ⋅      ⋅      ⋅       ⋅          ⋅        ⋅        ⋅   20736.0</code></pre><p>We are now ready to estimate the parameters. We take a subset of the training data to speed up the tutorial. The prior is passed to the <code>acefit!</code> function via the <code>prior</code> keyword argument.</p><pre><code class="language-julia hljs">result = acefit!(train_data, model; solver=solver, prior = P, weights=weights);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌────────────┬──────────┬───────┬────┬──────┬─────┐
│<span class="sgr1">       Type </span>│<span class="sgr1"> #Configs </span>│<span class="sgr1"> #Envs </span>│<span class="sgr1"> #E </span>│<span class="sgr1">   #F </span>│<span class="sgr1">  #V </span>│
├────────────┼──────────┼───────┼────┼──────┼─────┤
│   FLD_TiAl │       63 │   126 │ 63 │  378 │ 378 │
│ TiAl_T5000 │        3 │   310 │  3 │  930 │  18 │
├────────────┼──────────┼───────┼────┼──────┼─────┤
│      total │       66 │   436 │ 66 │ 1308 │ 396 │
│    missing │        0 │     0 │  0 │    0 │   0 │
└────────────┴──────────┴───────┴────┴──────┴─────┘
<span class="sgr36"><span class="sgr1">[ Info: </span></span>Assembling linear problem.
<span class="sgr36"><span class="sgr1">[ Info: </span></span>  - Creating feature matrix with size (1770, 270).
<span class="sgr36"><span class="sgr1">[ Info: </span></span>  - Beginning assembly with processor count:  1.
<span class="sgr32">Progress:   3%|█▎                                       |  ETA: 0:04:33</span><span class="sgr32">Progress:   5%|█▉                                       |  ETA: 0:03:18</span><span class="sgr32">Progress:   9%|███▊                                     |  ETA: 0:01:57</span><span class="sgr32">Progress:  11%|████▍                                    |  ETA: 0:01:44</span><span class="sgr32">Progress:  26%|██████████▌                              |  ETA: 0:00:54</span><span class="sgr32">Progress:  27%|███████████▏                             |  ETA: 0:00:52</span><span class="sgr32">Progress:  29%|███████████▊                             |  ETA: 0:00:50</span><span class="sgr32">Progress:  30%|████████████▍                            |  ETA: 0:00:48</span><span class="sgr32">Progress:  32%|█████████████                            |  ETA: 0:00:46</span><span class="sgr32">Progress:  33%|█████████████▋                           |  ETA: 0:00:44</span><span class="sgr32">Progress:  35%|██████████████▎                          |  ETA: 0:00:43</span><span class="sgr32">Progress:  36%|██████████████▉                          |  ETA: 0:00:41</span><span class="sgr32">Progress:  52%|█████████████████████▏                   |  ETA: 0:00:28</span><span class="sgr32">Progress:  53%|█████████████████████▊                   |  ETA: 0:00:27</span><span class="sgr32">Progress:  55%|██████████████████████▍                  |  ETA: 0:00:26</span><span class="sgr32">Progress:  56%|███████████████████████                  |  ETA: 0:00:25</span><span class="sgr32">Progress:  58%|███████████████████████▋                 |  ETA: 0:00:24</span><span class="sgr32">Progress:  62%|█████████████████████████▌               |  ETA: 0:00:21</span><span class="sgr32">Progress:  64%|██████████████████████████▏              |  ETA: 0:00:20</span><span class="sgr32">Progress:  65%|██████████████████████████▊              |  ETA: 0:00:19</span><span class="sgr32">Progress:  67%|███████████████████████████▍             |  ETA: 0:00:18</span><span class="sgr32">Progress:  68%|████████████████████████████             |  ETA: 0:00:17</span><span class="sgr32">Progress:  70%|████████████████████████████▋            |  ETA: 0:00:16</span><span class="sgr32">Progress:  71%|█████████████████████████████▎           |  ETA: 0:00:16</span><span class="sgr32">Progress:  73%|█████████████████████████████▉           |  ETA: 0:00:15</span><span class="sgr32">Progress:  74%|██████████████████████████████▌          |  ETA: 0:00:14</span><span class="sgr32">Progress:  76%|███████████████████████████████          |  ETA: 0:00:13</span><span class="sgr32">Progress:  77%|███████████████████████████████▋         |  ETA: 0:00:12</span><span class="sgr32">Progress:  79%|████████████████████████████████▎        |  ETA: 0:00:11</span><span class="sgr32">Progress:  80%|████████████████████████████████▉        |  ETA: 0:00:10</span><span class="sgr32">Progress:  82%|█████████████████████████████████▌       |  ETA: 0:00:10</span><span class="sgr32">Progress:  83%|██████████████████████████████████▏      |  ETA: 0:00:09</span><span class="sgr32">Progress:  85%|██████████████████████████████████▊      |  ETA: 0:00:08</span><span class="sgr32">Progress:  86%|███████████████████████████████████▍     |  ETA: 0:00:07</span><span class="sgr32">Progress:  88%|████████████████████████████████████     |  ETA: 0:00:06</span><span class="sgr32">Progress:  89%|████████████████████████████████████▋    |  ETA: 0:00:05</span><span class="sgr32">Progress:  91%|█████████████████████████████████████▎   |  ETA: 0:00:05</span><span class="sgr32">Progress:  92%|█████████████████████████████████████▉   |  ETA: 0:00:04</span><span class="sgr32">Progress:  94%|██████████████████████████████████████▌  |  ETA: 0:00:03</span><span class="sgr32">Progress:  95%|███████████████████████████████████████▏ |  ETA: 0:00:02</span><span class="sgr32">Progress:  97%|███████████████████████████████████████▊ |  ETA: 0:00:02</span><span class="sgr32">Progress:  98%|████████████████████████████████████████▍|  ETA: 0:00:01</span><span class="sgr32">Progress: 100%|█████████████████████████████████████████| Time: 0:00:50</span>
<span class="sgr36"><span class="sgr1">[ Info: </span></span>  - Assembly completed.
<span class="sgr36"><span class="sgr1">[ Info: </span></span>Assembling full weight vector.
<span class="sgr33"><span class="sgr1">┌ Warning: </span></span>x_tol is deprecated. Use x_abstol or x_reltol instead. The provided value (1.0e-8) will be used as x_abstol.
<span class="sgr33"><span class="sgr1">└ </span></span><span class="sgr90">@ Optim ~/.julia/packages/Optim/gmigl/src/types.jl:110</span>
Iter     Function value   Gradient norm
     0     4.671494e+03     2.457943e+03
 * time: 0.029603958129882812
     1     3.952872e+03     4.057872e+02
 * time: 0.4542210102081299
     2     3.371262e+03     4.421460e+02
 * time: 0.46385693550109863
     3     3.210146e+03     1.642349e+02
 * time: 0.4706408977508545
     4     3.174813e+03     1.968488e+02
 * time: 0.47475385665893555
     5     2.913051e+03     8.640587e+02
 * time: 0.4789299964904785
     6     2.675831e+03     7.730363e+02
 * time: 0.4830789566040039
     7     2.208479e+03     1.033571e+02
 * time: 0.48983192443847656
     8     2.095581e+03     1.164921e+03
 * time: 0.495236873626709
     9     2.030514e+03     1.788361e+03
 * time: 0.5034990310668945
    10     1.860275e+03     3.236795e+03
 * time: 0.5102319717407227
    11     9.464183e+02     2.183138e+03
 * time: 0.5156800746917725
    12     8.279883e+02     1.258797e+03
 * time: 0.5198318958282471
    13     8.100142e+02     7.198075e+02
 * time: 0.5225989818572998
    14     8.036075e+02     6.032632e+01
 * time: 0.5253610610961914
    15     8.035513e+02     1.366089e+01
 * time: 0.5294299125671387
    16     8.031186e+02     1.007879e+01
 * time: 0.5361368656158447
    17     8.031153e+02     8.503946e-01
 * time: 0.5388228893280029
    18     8.031153e+02     2.557221e-03
 * time: 0.5415098667144775
    19     8.031153e+02     5.514327e-05
 * time: 0.5442008972167969
    20     8.031153e+02     2.755087e-06
 * time: 0.5495810508728027
    21     8.031153e+02     1.233233e-05
 * time: 0.5523178577423096
    22     8.031153e+02     1.761847e-07
 * time: 0.5576448440551758
    23     8.031153e+02     1.018001e-05
 * time: 0.5827879905700684
    24     8.031153e+02     3.069041e-05
 * time: 0.5855100154876709
    25     8.031153e+02     2.968219e-05
 * time: 0.5895590782165527
    26     8.031153e+02     3.073939e-05
 * time: 0.5922670364379883
    27     8.031153e+02     1.692091e-06
 * time: 0.5975749492645264
    28     8.031153e+02     2.703804e-05
 * time: 0.6015970706939697
    29     8.031153e+02     6.440680e-06
 * time: 0.6042959690093994
    30     8.031153e+02     4.597944e-05
 * time: 0.6069638729095459
 * Status: success

 * Candidate solution
    Final objective value:     8.031153e+02

 * Found with
    Algorithm:     L-BFGS

 * Convergence measures
    |x - x&#39;|               = 1.59e-10 ≤ 1.0e-08
    |x - x&#39;|/|x&#39;|          = 1.21e-12 ≰ 0.0e+00
    |f(x) - f(x&#39;)|         = 1.96e-06 ≰ 0.0e+00
    |f(x) - f(x&#39;)|/|f(x&#39;)| = 2.44e-09 ≰ 0.0e+00
    |g(x)|                 = 4.60e-05 ≰ 0.0e+00

 * Work counters
    Seconds run:   1  (vs limit Inf)
    Iterations:    30
    f(x) calls:    136
    ∇f(x) calls:   136</code></pre><p>We can display an error table as follows:</p><pre><code class="language-julia hljs">@info(&quot;Training Error Table&quot;)
err_train = ACEpotentials.compute_errors(train_data, model; weights=weights);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr36"><span class="sgr1">[ Info: </span></span>Training Error Table
<span class="sgr36"><span class="sgr1">[ Info: </span></span>RMSE Table
┌────────────┬─────────┬──────────┬─────────┐
│<span class="sgr1">       Type </span>│<span class="sgr1"> E [meV] </span>│<span class="sgr1"> F [eV/A] </span>│<span class="sgr1"> V [meV] </span>│
├────────────┼─────────┼──────────┼─────────┤
│   FLD_TiAl │   3.615 │    0.043 │  59.849 │
│ TiAl_T5000 │  10.270 │    0.300 │  26.345 │
├────────────┼─────────┼──────────┼─────────┤
│        set │   4.155 │    0.254 │  58.742 │
└────────────┴─────────┴──────────┴─────────┘
<span class="sgr36"><span class="sgr1">[ Info: </span></span>MAE Table
┌────────────┬─────────┬──────────┬─────────┐
│<span class="sgr1">       Type </span>│<span class="sgr1"> E [meV] </span>│<span class="sgr1"> F [eV/A] </span>│<span class="sgr1"> V [meV] </span>│
├────────────┼─────────┼──────────┼─────────┤
│   FLD_TiAl │   2.556 │    0.029 │  38.571 │
│ TiAl_T5000 │   9.737 │    0.232 │  21.113 │
├────────────┼─────────┼──────────┼─────────┤
│        set │   2.882 │    0.173 │  37.778 │
└────────────┴─────────┴──────────┴─────────┘</code></pre><p>We should of course also look at test errors, which can be done as follows. Depending on the choice of solver, and solver parameters, the test errors might be very poor. Exploring different parameters in different applications can lead to significantly improved predictions.</p><pre><code class="language-julia hljs">@info(&quot;Test Error Table&quot;)
err_test = ACEpotentials.compute_errors(test_data, model; weights=weights);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr36"><span class="sgr1">[ Info: </span></span>Test Error Table
<span class="sgr36"><span class="sgr1">[ Info: </span></span>RMSE Table
┌────────────┬─────────┬──────────┬─────────┐
│<span class="sgr1">       Type </span>│<span class="sgr1"> E [meV] </span>│<span class="sgr1"> F [eV/A] </span>│<span class="sgr1"> V [meV] </span>│
├────────────┼─────────┼──────────┼─────────┤
│   FLD_TiAl │   7.571 │    0.049 │  66.284 │
│ TiAl_T5000 │   9.361 │    0.402 │  94.015 │
├────────────┼─────────┼──────────┼─────────┤
│        set │   7.632 │    0.274 │  67.293 │
└────────────┴─────────┴──────────┴─────────┘
<span class="sgr36"><span class="sgr1">[ Info: </span></span>MAE Table
┌────────────┬─────────┬──────────┬─────────┐
│<span class="sgr1">       Type </span>│<span class="sgr1"> E [meV] </span>│<span class="sgr1"> F [eV/A] </span>│<span class="sgr1"> V [meV] </span>│
├────────────┼─────────┼──────────┼─────────┤
│   FLD_TiAl │   4.463 │    0.035 │  41.038 │
│ TiAl_T5000 │   9.361 │    0.313 │  83.386 │
├────────────┼─────────┼──────────┼─────────┤
│        set │   4.612 │    0.162 │  42.321 │
└────────────┴─────────┴──────────┴─────────┘</code></pre><p>If we want to save the fitted potentials to disk to later use we can simply save the hyperparameters and the parameters. At the moment this must be done manually but a more complete and convenient interface for this will be provided, also adding various sanity checks.</p><pre><code class="language-julia hljs">using JSON
open(&quot;TiAl_model.json&quot;, &quot;w&quot;) do f
	 JSON.print(f, Dict(&quot;hyperparams&quot; =&gt; hyperparams, &quot;params&quot; =&gt; model.ps))
end</code></pre><p>To load the model back from disk it is safest to work within the same Julia project, i.e. the same version of all packages; ideally the the Manifest should not be changed. One then generates the model again, loads the parameters from disk and then sets them in the model. Again, this will be automated in the future.</p><p>Finally, we delete the model to clean up.</p><pre><code class="language-julia hljs">rm(&quot;TiAl_model.json&quot;)</code></pre><h3 id="Fast-Evaluator"><a class="docs-heading-anchor" href="#Fast-Evaluator">Fast Evaluator</a><a id="Fast-Evaluator-1"></a><a class="docs-heading-anchor-permalink" href="#Fast-Evaluator" title="Permalink"></a></h3><p><code>ACEpotentials.jl</code> provides an experimental &quot;fast evaluator&quot;. This tries to merge some of the operations in the full model resulting in a &quot;slimmer&quot; and usually faster evaluator. In some cases the performance gain can be multiple factors up to an order of magnitude. This is particularly important when using a parameter estimation solver that sparsifies. In that case, the performance gain can be significant.</p><p>To construct the fast evaluator, simply use</p><pre><code class="language-julia hljs">fpot = fast_evaluator(model)</code></pre><p>An optional keyword argument <code>aa_static = true</code> can be used to optimize the n-correlation layer for very small models (at most a few hundred parameters). For larger models this leads to a stack overflow.</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../tutorials/">« Tutorials Overview</a><a class="docs-footer-nextpage" href="../smoothness_priors/">Smoothness Priors »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Tuesday 6 January 2026 10:25">Tuesday 6 January 2026</span>. Using Julia version 1.12.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
